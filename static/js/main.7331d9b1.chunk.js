(this["webpackJsonpnab-weather-forecast"]=this["webpackJsonpnab-weather-forecast"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),i=n.n(c),o=n(23),s=n(18),l=n(30),u=n.n(l),d=n(40),j=n(62),b=n(63),h=n(36),v=n.n(h);v.a.defaults.baseURL="https://www.metaweather.com";var m=new(function(){function e(){Object(j.a)(this,e)}return Object(b.a)(e,[{key:"searchLocations",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/location/search/",{params:{query:t}});case 2:return n=e.sent,a=n.data,r=void 0===a?[]:a,e.abrupt("return",r.map((function(e){var t=e.woeid,n=e.location_type;return{id:t,name:e.title,type:n}})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLocationWeather",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/location/".concat(t,"/"));case 2:return n=e.sent,a=n.data,r=a.consolidated_weather,c=void 0===r?[]:r,e.abrupt("return",c.map((function(e){return{id:e.id,minTemp:e.min_temp,maxTemp:e.max_temp,date:e.applicable_date}})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}());var p="en-US";function f(e){var t=new Date(e);return function(e){return e.toLocaleDateString(p)===(new Date).toLocaleDateString(p)}(t)?"Today":t.toLocaleDateString(p,{weekday:"long"})}function O(e){return"".concat(Math.round(e),"\xb0C")}var x=n(5);function g(e){var t,n=e.data,a=f(n.date),r=(t=n.date,new Date(t).toLocaleDateString(p,{year:"numeric",month:"short",day:"numeric"})),c=O(n.minTemp),i=O(n.maxTemp);return Object(x.jsxs)("div",{className:"card",children:[Object(x.jsxs)("div",{className:"card-header",children:[Object(x.jsx)("h5",{className:"card-title",children:a}),Object(x.jsx)("p",{className:"card-subtitle text-muted",children:r})]}),Object(x.jsx)("div",{className:"card-body",children:Object(x.jsxs)("div",{className:"card-text",children:[Object(x.jsxs)("div",{children:["Min: ",c]}),Object(x.jsxs)("div",{children:["Max: ",i]})]})})]})}n(98);function y(e){var t=e.location,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n="number"===typeof e,r=Object(a.useCallback)((function(){return n?m.getLocationWeather(e):[]}),[e,n]),c=Object(s.useQuery)(["locationWeather",e],r,{enabled:n}),i=c.isLoading,o=c.data,l=void 0===o?[]:o,u=c.error;return{isLoading:i,data:l.slice(0,t),error:u}}(null===t||void 0===t?void 0:t.id),r=n.isLoading,c=n.data,i=n.error;return Object(x.jsx)("div",{className:"LocationWeather py-4",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsxs)("div",{className:"text-center mb-4",children:[Object(x.jsx)("h3",{className:"text-primary",children:null===t||void 0===t?void 0:t.name}),r&&Object(x.jsx)("h4",{children:"..."})]}),(null===i||void 0===i?void 0:i.message)&&Object(x.jsx)("div",{className:"alert alert-danger",role:"alert",children:null===i||void 0===i?void 0:i.message}),Object(x.jsx)("div",{className:"row",role:"listbox",children:c.map((function(e){return Object(x.jsx)("div",{className:"col py-3",role:"listitem",children:Object(x.jsx)(g,{data:e})},e.id)}))})]})})}function w(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=Object(a.useState)(e),r=Object(o.a)(n,2),c=r[0],i=r[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c}(n),i=Object(a.useCallback)((function(e){return r(e)}),[]),l=Object(a.useCallback)((function(){return m.searchLocations(c)}),[c]),u=Object(s.useQuery)(["locations",c],l,{enabled:Boolean(c)}),d=u.isLoading,j=u.data;return{isLoading:d,locations:void 0===j?[]:j,search:i,error:u.error}}var L=n(41),N=n(65),C=n(2),S=n(64),k=n.p+"static/media/search.65a7fd14.svg",T=(n(99),function(){return"No results"}),D=function(e){var t=e.children,n=Object(N.a)(e,["children"]);return Object(x.jsxs)(C.p.Control,Object(L.a)(Object(L.a)({},n),{},{children:[Object(x.jsx)("div",{className:"Autocomplete__leadingIcon",children:Object(x.jsx)("img",{src:k,alt:"Search"})}),t]}))};function _(e){var t=e.labelKey,n=e.valueKey,a=e.items,r=e.placeholder,c=e.loading,i=e.onChange,o=e.onSelect;return Object(x.jsx)(S.a,{autoFocus:!0,isClearable:!0,className:"Autocomplete",placeholder:r,getOptionLabel:function(e){return e[t]},getOptionValue:function(e){return e[n]},options:a,isLoading:c,components:{Control:D},noOptionsMessage:T,onInputChange:function(e){a.find((function(n){return n[t].toString().toLowerCase().includes(e.toLowerCase())}))||i(e)},onChange:function(e,t){"clear"!==t.action?"select-option"===t.action&&e&&o(e):i("")}})}n(116);function F(e){var t=e.onSelect,n=w(),a=n.isLoading,r=n.locations,c=n.search,i=n.error;return Object(x.jsx)("div",{className:"SearchBar app-bar navbar bg-dark",children:Object(x.jsxs)("div",{className:"container py-3",children:[Object(x.jsx)(_,{labelKey:"name",valueKey:"id",placeholder:"Search city...",items:r,loading:a,onChange:c,onSelect:t}),(null===i||void 0===i?void 0:i.message)&&Object(x.jsx)("div",{className:"text-error my-3",children:null===i||void 0===i?void 0:i.message})]})})}n(59);var M=new s.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:3e5}}});var W=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(s.QueryClientProvider,{client:M,children:[Object(x.jsx)(F,{onSelect:r}),Object(x.jsx)(y,{location:n})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,120)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(W,{})}),document.getElementById("root")),B()},59:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.7331d9b1.chunk.js.map